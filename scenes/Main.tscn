[gd_scene load_steps=8 format=3 uid="uid://m8lywpoyi1pw"]

[ext_resource type="Texture2D" uid="uid://b8qcorjialy4q" path="res://assets/bg.png" id="1_10lv7"]
[ext_resource type="PackedScene" uid="uid://brpfb5gqdqkcw" path="res://scenes/wall.tscn" id="3_1p0ql"]
[ext_resource type="Texture2D" uid="uid://dyne4c40xkco6" path="res://assets/linux_logo_icon_168243.png" id="4_4yeak"]
[ext_resource type="PackedScene" uid="uid://fr0y3hfol1n5" path="res://scenes/target.tscn" id="5_cvlo6"]

[sub_resource type="GDScript" id="GDScript_jb15w"]
script/source = "extends Node

@onready var Wall = preload(\"res://scenes/wall.tscn\")
@onready var ROBOT = preload(\"res://scenes/Robot.tscn\")

func instanciate_wall(x,y,south) -> void:
	var wall = Wall.instantiate()
	if south:
		wall.set_position(Vector2(x*50-2,y*50))
		add_child(wall)
	else:
		wall.set_position(Vector2(x*50,y*50+2))
		wall.set_rotation(deg_to_rad(-90))
		add_child(wall)

func instanciate_robot(x,y,color) -> void:
	var robot = ROBOT.instantiate()
	robot.set_position(Vector2(x*50,y*50))
	if color == \"RED\":
		robot.robot_color = robot.COLOR.RED
	elif color == \"BLUE\":
		robot.robot_color = robot.COLOR.BLUE
	elif color == \"GREEN\":
		robot.robot_color = robot.COLOR.GREEN
	else:
		robot.robot_color = robot.COLOR.YELLOW
	add_child(robot)

func create_grid():
	var grid = []
	for i in range(16): 
		grid.append([])
		for j in range(16): 
			grid[i].append(\"\")
	return grid

func _ready() -> void:
	var grid = create_grid()
	grid = [ 
	[ \"01\", \"12\", \"01\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"12\", \"01\", \"1\", \"1\", \"12\" ],
	[ \"0\", \"\", \"2\", \"01\", \"\", \"\", \"\", \"\", \"\", \"23\", \"0\", \"\", \"\", \"\", \"\", \"2\" ],
	[ \"0\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"1\", \"\", \"\", \"\", \"\", \"\", \"23\" ],
	[ \"0\", \"\", \"\", \"\", \"\", \"\", \"23\", \"0\", \"\", \"\", \"2\", \"03\", \"\", \"\", \"\", \"12\" ],
	[ \"02\", \"03\", \"\", \"\", \"\", \"\", \"1\", \"\", \"\", \"\", \"\", \"1\", \"\", \"\", \"\", \"2\" ],
	[ \"0\", \"1\", \"\", \"\", \"3\", \"\", \"\", \"\", \"\", \"\", \"3\", \"\", \"\", \"\", \"\", \"2\" ],
	[ \"03\", \"\", \"\", \"\", \"12\", \"0\", \"\", \"3\", \"3\", \"\", \"12\", \"0\", \"\", \"\", \"\", \"2\" ],
	[ \"01\", \"\", \"\", \"\", \"\", \"\", \"2\", \"01\", \"12\", \"0\", \"\", \"\", \"2\", \"03\", \"\", \"2\" ],
	[ \"0\", \"\", \"\", \"\", \"\", \"\", \"2\", \"03\", \"23\", \"0\", \"\", \"\", \"\", \"1\", \"\", \"2\" ],
	[ \"0\", \"\", \"\", \"\", \"\", \"\", \"\", \"1\", \"1\", \"\", \"\", \"\", \"\", \"\", \"\", \"2\" ],
	[ \"0\", \"3\", \"\", \"\", \"2\", \"03\", \"\", \"\", \"\", \"\", \"2\", \"01\", \"\", \"\", \"\", \"2\" ],
	[ \"02\", \"01\", \"\", \"\", \"\", \"1\", \"3\", \"\", \"\", \"\", \"3\", \"\", \"2\", \"03\", \"\", \"23\" ],
	[ \"0\", \"\", \"\", \"\", \"\", \"\", \"12\", \"\", \"\", \"\", \"12\", \"\", \"\", \"1\", \"\", \"12\" ],
	[ \"03\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"23\", \"0\", \"\", \"\" ],
	[ \"01\", \"\", \"\", \"23\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"1\", \"\", \"\", \"2\" ],
	[ \"0\", \"\", \"\", \"1\", \"\", \"2\", \"\", \"\", \"\", \"2\", \"\", \"\", \"\", \"\", \"\", \"2\" ]
	]
	
	for y in range(16):
		for x in range(16):
			# WALL VERTICAL 
			if \"2\" in grid[y][x]:
				if x != 15:
					instanciate_wall(x+1,y,true)
			# WALL HORIZON
			if \"1\" in grid[y][x]:
				if y != 0:
					instanciate_wall(x,y,false)

	instanciate_robot(7,3,\"RED\")
	instanciate_robot(2,4,\"GREEN\")
	instanciate_robot(7,6,\"BLUE\")
	instanciate_robot(3,11,\"YELLOW\")
"

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_hqckr"]
bg_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_g1sig"]
bg_color = Color(0, 0, 0, 1)

[node name="Main" type="Node2D"]
script = SubResource("GDScript_jb15w")

[node name="Background" type="Sprite2D" parent="."]
position = Vector2(500, 500)
texture = ExtResource("1_10lv7")

[node name="Panel" type="Panel" parent="Background"]
offset_left = -659.0
offset_top = 298.0
offset_right = 518.0
offset_bottom = 498.0
theme_override_styles/panel = SubResource("StyleBoxFlat_hqckr")

[node name="Panel2" type="Panel" parent="Background"]
offset_left = 300.0
offset_top = -500.0
offset_right = 500.0
offset_bottom = 300.0
theme_override_styles/panel = SubResource("StyleBoxFlat_g1sig")

[node name="Middle_Earth" type="Node2D" parent="Background"]
position = Vector2(-502, -550)

[node name="Wall" parent="Background/Middle_Earth" instance=ExtResource("3_1p0ql")]
position = Vector2(448, 450)

[node name="Wall3" parent="Background/Middle_Earth" instance=ExtResource("3_1p0ql")]
position = Vector2(350, 400)

[node name="Wall8" parent="Background/Middle_Earth" instance=ExtResource("3_1p0ql")]
position = Vector2(448, 400)

[node name="Wall9" parent="Background/Middle_Earth" instance=ExtResource("3_1p0ql")]
position = Vector2(350, 448)

[node name="Wall4" parent="Background/Middle_Earth" instance=ExtResource("3_1p0ql")]
position = Vector2(400, 495)
rotation = 1.5708

[node name="Wall5" parent="Background/Middle_Earth" instance=ExtResource("3_1p0ql")]
position = Vector2(450, 495)
rotation = 1.5708

[node name="Wall6" parent="Background/Middle_Earth" instance=ExtResource("3_1p0ql")]
position = Vector2(448, 400)
rotation = 1.5708

[node name="Wall7" parent="Background/Middle_Earth" instance=ExtResource("3_1p0ql")]
position = Vector2(400, 400)
rotation = 1.5708

[node name="LinuxLogoIcon168243" type="Sprite2D" parent="Background/Middle_Earth"]
position = Vector2(400, 452)
scale = Vector2(0.2073, 0.152757)
texture = ExtResource("4_4yeak")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(407, 404)

[node name="Panel" type="Panel" parent="."]
offset_left = -179.0
offset_top = -200.0
offset_right = 997.0
theme_override_styles/panel = SubResource("StyleBoxFlat_hqckr")

[node name="Panel2" type="Panel" parent="."]
offset_left = -200.0
offset_bottom = 800.0
theme_override_styles/panel = SubResource("StyleBoxFlat_g1sig")

[node name="StaticBody2D" parent="." instance=ExtResource("5_cvlo6")]
position = Vector2(600, 650)
